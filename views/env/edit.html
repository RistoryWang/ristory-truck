
		<div class="alert alert-warning alert-dismissible hide" role="alert"></div>
		
		<form class="form-horizontal ajax-form" method="post" action="{{urlfor "EnvController.Edit"}}">
			<input type="hidden" name="id" value="{{.env.Id}}" />
			<input type="hidden" name="type" value="{{.env.Type}}" />

			<div class="form-group">
				<label for="name" class="col-sm-2 control-label">发布环境名称</label>
				<div class="col-sm-3">
					<input type="text" class="form-control" id="name" name="name" value="{{.env.Name}}">
				</div>
			</div>
            <div class="form-group">
                <label for="env_type" class="col-sm-2 control-label">发布环境类型</label>
                <div class="col-sm-3">
                    <select name="env_type">
                        <option value="">请选择</option>
                        <option value="dev">开发环境(dev)</option>
                        <option value="test">测试环境(test* + uat)</option>
                        <option value="prod">正式环境(gray + prod)</option>
					</select>
                </div>
            </div>
			<div class="form-group">
				<label for="ssh_user" class="col-sm-2 control-label">SSH帐号</label>
				<div class="col-sm-3">
					<input type="text" class="form-control" id="ssh_user" name="ssh_user" value="{{.env.SshUser}}">
				</div>
			</div>
			<div class="form-group">
				<label for="ssh_port" class="col-sm-2 control-label">SSH端口</label>
				<div class="col-sm-3">
					<input type="text" class="form-control" id="ssh_port" name="ssh_port" value="{{.env.SshPort}}">
				</div>
			</div>
			<div class="form-group">
				<label for="ssh_key" class="col-sm-2 control-label">SSH KEY路径</label>
				<div class="col-sm-3">
					<input type="text" class="form-control" id="ssh_key" name="ssh_key" value="{{.env.SshKey}}">
				</div>
				<div class="help-block col-sm-8 col-sm-reset inline">密钥在跳板机存放的路径</div>
			</div>
			
			<!--<div class="form-group">
				<label for="pub_dir" class="col-sm-2 control-label">发布目录</label>
				<div class="col-sm-3">
					<input type="text" class="form-control" id="pub_dir" name="pub_dir" value="{{.env.PubDir}}">
				</div>
				<div class="help-block col-sm-8 col-sm-reset inline">代码发布目标路径</div>
			</div>
			
			<div class="form-group">
				<label for="before_shell" class="col-sm-2 control-label">执行的shell脚本</label>
				<div class="col-sm-6">
					<textarea name="before_shell" id="before_shell" rows="6" class="form-control" placeholder="在目标服务器执行">{{.env.BeforeShell}}</textarea>
				</div>
			</div>

		<div class="form-group">
            <label for="after_shell" class="col-sm-2 control-label">发布后执行的shell脚本</label>
            <div class="col-sm-6">
                <textarea name="after_shell" id="after_shell" rows="6" class="form-control" placeholder="发布后在目标服务器执行">{{.env.AfterShell}}</textarea>
            </div>
        </div>-->
			
			<div class="form-group">
				<label for="after_shell" class="col-sm-2 control-label">服务器</label>
				<div class="col-sm-6">
					{{range $k,$v := .serverList}}
					<label class="inline">
						<input type="checkbox" id="server-{{$v.Id}}" class="ace ace-checkbox-2" name="serverIds" value="{{$v.Id}}">
						<span class="lbl"> {{$v.Description}}_{{$v.Ip}}</span>
					</label>
					&nbsp;&nbsp;
					{{end}}
				</div>
			</div>
			
			<div class="hr hr-16 hr-dotted"></div>


		{{/*<div class="form-group">*/}}
			{{/*<label id="label_application_properties" for="application_properties" class="col-sm-2 control-label">application.properties</label>*/}}
			{{/*<div class="col-sm-6">*/}}
				{{/*<textarea name="application_properties" id="application_properties" rows="15" class="form-control" placeholder="java基础配置">{{.env.ApplicationProperties}}</textarea>*/}}
			{{/*</div>*/}}
		{{/*</div>*/}}

		{{/*<div class="form-group">*/}}
			{{/*<label id="label_log4j_properties" for="log4j_properties" class="col-sm-2 control-label">log4j.properties</label>*/}}
			{{/*<div class="col-sm-6">*/}}
				{{/*<textarea name="log4j_properties" id="log4j_properties" rows="15" class="form-control" placeholder="java日志配置">{{.env.Log4jProperties}}</textarea>*/}}
			{{/*</div>*/}}
		{{/*</div>*/}}

		{{/*<div class="form-group">*/}}
			{{/*<label id="label_prod_yml" for="prod_yml" class="col-sm-2 control-label">prod.yml</label>*/}}
			{{/*<div class="col-sm-6">*/}}
				{{/*<textarea name="prod_yml" id="prod_yml" rows="15" class="form-control" placeholder="node配置">{{.env.ProdYml}}</textarea>*/}}
			{{/*</div>*/}}
		{{/*</div>*/}}

		{{/*<div class="form-group">*/}}
			{{/*<label id="label_remote_sh" for="remote_sh" class="col-sm-2 control-label">shell.param</label>*/}}
			{{/*<div class="col-sm-6">*/}}
				{{/*<textarea name="remote_sh" id="remote_sh" rows="15" class="form-control" placeholder="shell配置">{{.env.RemoteSh}}</textarea>*/}}
			{{/*</div>*/}}
		{{/*</div>*/}}


		<div class="hr hr-16 hr-dotted"></div>

			<div class="form-group">
				<label for="send_mail" class="col-sm-2 control-label">是否发送邮件</label>
				<div class="col-sm-5">
					<input name="send_mail" class="ace ace-switch ace-switch-4 btn-flat" type="checkbox" value="1" {{if gt .env.SendMail 0}}checked{{end}}>
					<span class="lbl"></span>
				</div>
			</div>
			<div class="form-group">
				<label for="mail_to" class="col-sm-2 control-label">邮件模板</label>
				<div class="col-sm-6">
					<select name="mail_tpl_id">
						<option value="">请选择</option>
						{{range $k, $v := .mailTplList}}
						<option value="{{$v.Id}}" {{if eq $.env.MailTplId $v.Id}}selected{{end}}>{{$v.Name}}</option>
						{{end}}
					</select>
				</div>
			</div>
			<div class="form-group">
				<label for="mail_to" class="col-sm-2 control-label">收件人列表</label>
				<div class="col-sm-6">
					<textarea name="mail_to" id="mail_to" rows="4" class="form-control" placeholder="每行一个邮件地址">{{.env.MailTo}}</textarea>
				</div>
			</div>
			<div class="form-group">
				<label for="mail_cc" class="col-sm-2 control-label">抄送人列表</label>
				<div class="col-sm-6">
					<textarea name="mail_cc" id="mail_cc" rows="4" class="form-control" placeholder="每行一个邮件地址">{{.env.MailCc}}</textarea>
				</div>
			</div>

			<div class="clearfix form-actions">
				<div class="col-sm-offset-2 col-sm-10">
					<button type="submit" class="btn btn-info"><i class="ace-icon fa fa-check bigger-110"></i>提交</button>
					<a href="{{urlfor "EnvController.List" "project_id" .env.ProjectId "typex" .env.Type}}" class="btn btn-default"><i class="ace-icon fa fa-reply bigger-110"></i>返回</a>
				</div>
			</div>
		</form>

<script>
$(function() {
    var serverIds = eval({{.serverIds}});
    for (var k in serverIds) {
        $('#server-'+serverIds[k]).attr('checked', true);
    }
    // if ($("input[name='type']").val() == "node") {
    //     $('#application_properties').hide();
    //     $('#label_application_properties').hide();
    //     $('#log4j_properties').hide();
    //     $('#label_log4j_properties').hide();
    //     $('#remote_sh').hide();
    //     $('#label_remote_sh').hide();
    // } else if ($("input[name='type']").val() == "java"){
    //     $('#prod_yml').hide();
    //     $('#label_prod_yml').hide();
    //     $('#remote_sh').hide();
    //     $('#label_remote_sh').hide();
    // }else if ($("input[name='type']").val() == "shell"){
    //     $('#application_properties').hide();
    //     $('#label_application_properties').hide();
    //     $('#log4j_properties').hide();
    //     $('#label_log4j_properties').hide();
    //     $('#prod_yml').hide();
    //     $('#label_prod_yml').hide();
    // }
});
</script>